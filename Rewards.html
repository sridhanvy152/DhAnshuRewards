<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ashu-Dhannu Rewards</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 10px;
      background: #f7f7f7;
	  background: url('https://raw.githubusercontent.com/sridhanvy152/DhAnshuRewards/refs/heads/main/img1.jpg') no-repeat center center fixed;
      background-size: cover;
    }

    .container {
      max-width: 400px;
      margin: auto;
      background: white;
      padding: 5px;
    }

    h2 {
      text-align: center;
      margin-bottom: 15px;
      font-size: 22px;
    }

    input, select, button {
      width: 60px;
      margin: 6px 0px;
      padding: 10px;
      font-size: 20px;
    }

    .total {
      font-size: 18px;
      font-weight: bold;
      margin: 10px 0;
      color: green;
      text-align: center;
    }

    .task-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 10px 0;
    }

    .task-group label {
      flex: 1 1 45%;
      background: #e9f5e9;
      padding: 10px;
      border-radius: 8px;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .task-group input[type="number"] {
      flex: 1;
      margin-top: 6px;
    }

    .log {
      margin-top: 20px;
      border-top: 1px solid #ccc;
      padding-top: 10px;
      font-size: 14px;
    }

    .log h3 {
      margin-bottom: 10px;
      font-size: 16px;
    }

    .clear-btn {
      background-color: red;
      color: white;
      font-size: 14px;
    }

    .add-btn {
      background-color: green;
      color: white;
      font-size: 14px;
    }

    .date-btn {
      width: 160px;
      font-size: 14px;
    }

    .neg-btn {
      background-color: white;
      color: black;
    }

    @media (max-width: 360px) {
      .task-group label {
        flex: 1 1 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Ashu-Dhannu Rewards</h2>

    <div class="total" id="overallTotal">Overall Total Points: 0</div>

    <input type="date" id="dateSelector" class="date-btn" onchange="updateUI()" />

    <div class="total" id="totalPoints">Today's Points: 0</div>

    <div class="task-group">
      <label><input type="checkbox" value="Breakfast"> Breakfast</label>
      <label><input type="checkbox" value="Lunch"> Lunch</label>
      <label><input type="checkbox" value="Gym"> Gym</label>
      <label><input type="checkbox" value="Study"> Study</label>
      <label><input type="checkbox" value="Dinner-Tablets"> Dinner-Tablets</label>
      <label><input type="checkbox" value="Sleeping"> Sleeping</label>
      <label style="flex-direction: column; align-items: flex-start;">
        Sorry:
        <input type="number" id="negativePoints" placeholder="ðŸ˜”" style="font-size: 20px;" />
      </label>
    </div>

    <button onclick="addEntries()" class="add-btn">Add Tasks</button>
    <button onclick="clearData()" class="clear-btn">Clear Data</button>

    <div class="log" id="log"></div>
  </div>

  <script>
    let allEntries = JSON.parse(localStorage.getItem("dailyRewardEntries")) || {};

    function getSelectedDate() {
      const dateInput = document.getElementById("dateSelector").value;
      return dateInput || new Date().toISOString().slice(0, 10);
    }

    function saveEntries() {
      localStorage.setItem("dailyRewardEntries", JSON.stringify(allEntries));
    }

    function calculateOverallTotal() {
      let total = 0;
      for (const date in allEntries) {
        allEntries[date].forEach(entry => {
          total += entry.points;
        });
      }
      document.getElementById("overallTotal").textContent = `Overall Total Points: ${total}`;
    }

    function updateUI() {
      const log = document.getElementById("log");
      const totalDisplay = document.getElementById("totalPoints");
      const selectedDate = getSelectedDate();

      const entries = allEntries[selectedDate] || [];

      log.innerHTML = `<h3>Entries for ${selectedDate}</h3>`;
      let total = 0;
      entries.forEach(entry => {
        const div = document.createElement("div");
        div.textContent = `${entry.task} â†’ ${entry.points > 0 ? "+" : ""}${entry.points}`;
        log.appendChild(div);
        total += entry.points;
      });

      totalDisplay.textContent = `Today's Points: ${total}`;
      calculateOverallTotal();
    }

    function addEntries() {
      const checkboxes = document.querySelectorAll('.task-group input[type="checkbox"]');
      const negativeInput = document.getElementById("negativePoints");
      const selectedDate = getSelectedDate();

      const todayStr = new Date().toISOString().slice(0, 10);
      if (selectedDate > todayStr) {
        alert("Ashamma, you can't enter data for tomorrow or future dates!");
        return;
      }

      if (!allEntries[selectedDate]) {
        allEntries[selectedDate] = [];
      }

      let anySelected = false;

      checkboxes.forEach(checkbox => {
        if (checkbox.checked) {
          const task = checkbox.value;
          allEntries[selectedDate].push({ task, points: 1 });
          checkbox.checked = false;
          anySelected = true;
        }
      });

      const negativeValue = parseInt(negativeInput.value);
      if (!isNaN(negativeValue) && negativeValue !== 0) {
        allEntries[selectedDate].push({ task: "Negatives", points: -Math.abs(negativeValue) });
        negativeInput.value = "";
        anySelected = true;
      }

      if (!anySelected) {
        alert("Please select at least one task or enter negative points.");
        return;
      }

      saveEntries();
      updateUI();
    }

    function clearData() {
      const selectedDate = getSelectedDate();
      if (allEntries[selectedDate]) {
        if (confirm(`Ashamma, are you sure you want to delete data for ${selectedDate}?`)) {
          delete allEntries[selectedDate];
          saveEntries();
          updateUI();
          alert(`Data for ${selectedDate} has been cleared Ashamma`);
        }
      } else {
        alert(`No data found for the ${selectedDate} Ashamma.`);
      }
    }

    window.onload = () => {
      const today = new Date();
      const todayStr = today.toISOString().slice(0, 10);

      const dateInput = document.getElementById("dateSelector");
      dateInput.value = todayStr;
      dateInput.max = todayStr;

      updateUI();
    };
  </script>
</body>
</html>
